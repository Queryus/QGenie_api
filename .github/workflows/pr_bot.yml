# .github/workflows/pr_bot.yml
name: Pull Request Bot

on:
  # Pull Request ê´€ë ¨ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ
  pull_request:
    types: [opened, closed, reopened, synchronize]
  issue_comment:
    types: [created]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      # -------------------------
      #   ìƒì„±/ë™ê¸°í™” ì•Œë¦¼
      # -------------------------
      - name: Send PR Created Notification
        if: github.event_name == 'pull_request' && (github.event.action == 'opened' || github.event.action == 'synchronize')
        uses: antoinezanardi/discord-webhook-action@v2
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "Pull Request #${{ github.event.pull_request.number }}: ${{ github.event.pull_request.title }}"
          url: ${{ github.event.pull_request.html_url }}
          color: "#31a6f5" # íŒŒë€ìƒ‰
          username: "GitHub PR ë´‡"
          description: "ğŸ”·ğŸ”·ğŸ”·  **${{ github.actor }}**ë‹˜ì´ Pull Requestë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤.  ğŸ”·ğŸ”·ğŸ”·"

      # -------------------------
      #   ëŒ“ê¸€ ì•Œë¦¼
      # -------------------------
      - name: Send PR Comment Notification
        if: github.event_name == 'issue_comment' && github.event.issue.pull_request
        uses: antoinezanardi/discord-webhook-action@v2
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "New Comment on PR #${{ github.event.issue.number }}"
          url: ${{ github.event.comment.html_url }}
          color: "#e67e22" # ì£¼í™©ìƒ‰
          username: "GitHub ëŒ“ê¸€ ë´‡"
          description: "ğŸŸ ğŸŸ ğŸŸ   **${{ github.actor }}**ë‹˜ì˜ ìƒˆ ëŒ“ê¸€: \n${{ github.event.comment.body }}  ğŸŸ ğŸŸ ğŸŸ "

      # -------------------------
      #   ë¨¸ì§€(Merge) ì•Œë¦¼
      # -------------------------
      - name: Send PR Merged Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: antoinezanardi/discord-webhook-action@v2
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "Pull Request #${{ github.event.pull_request.number }} Merged!"
          url: ${{ github.event.pull_request.html_url }}
          color: "#4ed971" # ì´ˆë¡ìƒ‰
          username: "GitHub Merge ë´‡"
          description: "âœ…âœ…âœ…  **${{ github.actor }}**ë‹˜ì´ **${{ github.event.pull_request.title }}** PRì„ ë¨¸ì§€í–ˆìŠµë‹ˆë‹¤.  âœ…âœ…âœ…"

      # -------------------------
      #   ë‹«í˜(Close) ì•Œë¦¼
      # -------------------------
      - name: Send PR Closed Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == false
        uses: antoinezanardi/discord-webhook-action@v2
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "Pull Request #${{ github.event.pull_request.number }} Closed"
          url: ${{ github.event.pull_request.html_url }}
          color: "#e62410" # ë¹¨ê°„ìƒ‰
          username: "GitHub PR ë´‡"
          description: "âŒâŒâŒ  **${{ github.actor }}**ë‹˜ì´ **${{ github.event.pull_request.title }}** PRì„ ë‹«ì•˜ìŠµë‹ˆë‹¤.  âŒâŒâŒ"
